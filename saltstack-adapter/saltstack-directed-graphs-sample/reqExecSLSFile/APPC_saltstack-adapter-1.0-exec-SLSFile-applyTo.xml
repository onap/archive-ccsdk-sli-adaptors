<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='APPC' version='2.0.1'><method rpc='saltstack-adapter-1.0-exec-SLSFile-applyTo' mode='sync'>
<execute plugin='org.openecomp.appc.adapter.ansible.AnsibleAdapter' method='reqExecCommand' >
                        <parameter name='HostName' value='`$AgentUrl`'/>
                        <parameter name='Port' value='`$Port`'/>
                        <parameter name='User' value='`$User`'/>
                        <parameter name='Password' value='`$Password`'/>
                        <parameter name='Id' value='test1'/>
                        <parameter name='cmd' value='salt &apos;*&apos; test.ping --out=json --static'/>
                        <parameter name='slsExec' value='false'/>
                        <parameter name='execTimeout' value='`$Timeout`'/>
<outcome value='failure'>
<return status='failure'>
<parameter name='error-code' value='200' />
<parameter name='error-message' value='`$org.openecomp.appc.adapter.ansible.message`' />
<parameter name='output.status.results' value='`$org.openecomp.appc.adapter.ansible.results`' />
</return></outcome><outcome value='Other'>
<switch test="`$org.onap.appc.adapter.saltstack.result.code`">
<outcome value='200'>
<switch test="`$test1.minion1`">
<outcome value='true'>
<execute plugin='org.openecomp.appc.adapter.ansible.AnsibleAdapter' method='reqExecCommand' >
                        <parameter name='HostName' value='`$AgentUrl`'/>
                        <parameter name='Port' value='`$Port`'/>
                        <parameter name='User' value='`$User`'/>
                        <parameter name='Password' value='`$Password`'/>
                        <parameter name='Id' value='test2'/>
                        <parameter name='slsFile' value='file/location/test.sls'/>
                        <parameter name='applyTo' value='minion1'/>
                        <parameter name='execTimeout' value='`$Timeout`'/>
<outcome value='failure'>
<return status='failure'>
<parameter name='error-code' value='200' />
<parameter name='error-message' value='`$org.openecomp.appc.adapter.ansible.message`' />
<parameter name='output.status.results' value='`$org.openecomp.appc.adapter.ansible.results`' />
</return></outcome><outcome value='Other'>
<switch test="`$org.onap.appc.adapter.saltstack.result.code`">
<outcome value='200'>
<return status='success'>
<parameter name='output.status.code' value='`$org.openecomp.appc.adapter.ansible.result.code`' />
<parameter name='output.status.message' value='`$org.openecomp.appc.adapter.ansible.message`'/>
<parameter name='output.status.results' value = '`$org.openecomp.appc.adapter.ansible.results`'/>
</return></outcome><outcome value='Other'>
<return status='failure'>
<parameter name='error-code' value='200' />
<parameter name='error-message' value='`$org.openecomp.appc.adapter.ansible.message`' />
<parameter name='output.status.results' value='`$org.openecomp.appc.adapter.ansible.results`' />
</return></outcome></switch></outcome></execute></outcome><outcome value='Other'>
<return status='failure'>
<parameter name='error-code' value='200' />
<parameter name='error-message' value='`$org.openecomp.appc.adapter.ansible.message`' />
<parameter name='output.status.results' value='`$org.openecomp.appc.adapter.ansible.results`' />
</return></outcome></switch></outcome><outcome value='Other'>
<return status='failure'>
<parameter name='error-code' value='200' />
<parameter name='error-message' value='`$org.openecomp.appc.adapter.ansible.message`' />
<parameter name='output.status.results' value='`$org.openecomp.appc.adapter.ansible.results`' />
</return></outcome></switch></outcome></execute></method></service-logic>